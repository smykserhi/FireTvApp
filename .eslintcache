[{"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\index.tsx":"1","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\reportWebVitals.ts":"2","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\store\\store.ts":"3","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\App.tsx":"4","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\store\\dataReducer.ts":"5","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\store\\logInReduser.ts":"6","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\constants.ts":"7","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\MyList\\index.tsx":"8","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Search\\index.tsx":"9","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\LogIn\\index.tsx":"10","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Video\\index.tsx":"11","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Pages\\index.tsx":"12","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\NotFound\\index.tsx":"13","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Settings\\index.tsx":"14","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\api.ts":"15","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\store\\actions.ts":"16","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Home\\Full.tsx":"17","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Home\\index.tsx":"18","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\SideMenu\\index.tsx":"19","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Loading\\index.tsx":"20","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Home\\Guide.tsx":"21","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Home\\Showcase.tsx":"22","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Home\\Normal.tsx":"23","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Video\\VideoPlayer.tsx":"24"},{"size":748,"mtime":1613504667833,"results":"25","hashOfConfig":"26"},{"size":440,"mtime":1613504624495,"results":"27","hashOfConfig":"26"},{"size":442,"mtime":1613504667836,"results":"28","hashOfConfig":"26"},{"size":1273,"mtime":1614882626425,"results":"29","hashOfConfig":"26"},{"size":613,"mtime":1614808079304,"results":"30","hashOfConfig":"26"},{"size":813,"mtime":1614807697417,"results":"31","hashOfConfig":"26"},{"size":2282,"mtime":1614882730217,"results":"32","hashOfConfig":"26"},{"size":7145,"mtime":1614983288526,"results":"33","hashOfConfig":"26"},{"size":12827,"mtime":1615232442676,"results":"34","hashOfConfig":"26"},{"size":4425,"mtime":1614882641313,"results":"35","hashOfConfig":"26"},{"size":29373,"mtime":1614981528473,"results":"36","hashOfConfig":"26"},{"size":559,"mtime":1614882172001,"results":"37","hashOfConfig":"26"},{"size":140,"mtime":1613504624491,"results":"38","hashOfConfig":"26"},{"size":5085,"mtime":1615232514000,"results":"39","hashOfConfig":"26"},{"size":4636,"mtime":1614880238890,"results":"40","hashOfConfig":"26"},{"size":645,"mtime":1614808080550,"results":"41","hashOfConfig":"26"},{"size":2855,"mtime":1613504667822,"results":"42","hashOfConfig":"26"},{"size":23222,"mtime":1615234548930,"results":"43","hashOfConfig":"26"},{"size":2752,"mtime":1615232227129,"results":"44","hashOfConfig":"26"},{"size":1089,"mtime":1614125299211,"results":"45","hashOfConfig":"26"},{"size":5641,"mtime":1614982420264,"results":"46","hashOfConfig":"26"},{"size":4109,"mtime":1614967230196,"results":"47","hashOfConfig":"26"},{"size":4568,"mtime":1614876705468,"results":"48","hashOfConfig":"26"},{"size":19885,"mtime":1614978952930,"results":"49","hashOfConfig":"26"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},"11q4qkh",{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"73","usedDeprecatedRules":"52"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100","usedDeprecatedRules":"52"},"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\index.tsx",[],["101","102"],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\reportWebVitals.ts",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\store\\store.ts",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\App.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\store\\dataReducer.ts",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\store\\logInReduser.ts",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\constants.ts",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\MyList\\index.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Search\\index.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\LogIn\\index.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Video\\index.tsx",["103","104","105","106"],"import React, { useState, useEffect } from \"react\"\r\nimport { RouteComponentProps, withRouter } from 'react-router';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { logOut, clearData } from \"../../store/actions\"\r\nimport { StorageType } from \"../../store/types\"\r\nimport { LOGIN, colors, hexToRGBA } from \"../../constants\"\r\nimport { Loading } from \"../Loading\"\r\nimport api from \"../../api\"\r\nimport styled, { keyframes } from 'styled-components';\r\nimport { AddCircleOutline } from \"@styled-icons/material/AddCircleOutline\"\r\nimport { RemoveCircleOutline } from \"@styled-icons/material/RemoveCircleOutline\"\r\nimport { Play } from \"@styled-icons/ionicons-solid/Play\"\r\nimport { VideoCamera } from \"@styled-icons/heroicons-solid/VideoCamera\"\r\nimport { LocationPin } from \"@styled-icons/entypo/LocationPin\"\r\nimport { metadataType } from \"../Home\"\r\nimport moment from 'moment';\r\nimport VideoPlayer from \"./VideoPlayer\"\r\nimport { ArrowBack } from \"@styled-icons/ionicons-sharp/ArrowBack\"\r\n\r\n\r\ninterface MainProps {\r\n    bgImage: string\r\n}\r\ninterface ButtonProps {\r\n    selected: boolean\r\n}\r\n\r\ninterface NumberProps {\r\n    anime?: boolean\r\n}\r\n\r\nconst ShowItemAnime = keyframes`\r\n\r\n    0% {\r\n      transform: rotateX(0deg);\r\n      background: ${colors.counterColour};\r\n    }   \r\n    50% {\r\n        transform: rotateX(90deg);\r\n        background: ${colors.primary};\r\n    }\r\n    100% {\r\n        transform: rotateX(0deg);\r\n        background: ${colors.counterColour};\r\n    }  \r\n`\r\nconst MainBox = styled.div<MainProps>`\r\n    background: url(\"${props => props.bgImage}\") no-repeat ;    \r\n    /*mask-image: linear-gradient(90deg, rgba(255,255,255,0) 10%, ${colors.bgPrimary} 25%) ;    */\r\n    background-size: 100% 100%;\r\n    background-position: 100%;    \r\n    width: 100%;\r\n    height: 100vh;\r\n    overflow: hidden;\r\n    z-index:-1;\r\n`\r\nconst MenuBox = styled.div`    \r\n    position: absolute;\r\n    top: 40%;\r\n    width: 17vw;\r\n    padding-left: 4rem;\r\n`\r\nconst DisBox = styled.div`\r\n    background-color: ${hexToRGBA(colors.bgPrimary, 0.7)};\r\n    height: 30vh;\r\n    position: absolute;\r\n    top: 70%;\r\n    width: 100vw;  \r\n    \r\n`\r\nconst TitleBox = styled.div`\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin: 0 4rem;\r\n    opacity: 1;\r\n`\r\nconst Dis = styled.div`\r\n    margin: 0 4rem;\r\n    opacity: 1;\r\n`\r\nconst Buttons = styled.div<ButtonProps>`\r\n    width: 100%;\r\n    height: 2.5rem;\r\n    background-color: ${props => props.selected ? colors.bgPrimary : colors.textPrimary};\r\n    color: ${props => props.selected ? colors.textPrimary : \"black\"};\r\n    border: ${props => props.selected ? `solid ${colors.textPrimary} 2px` : \"\"} ;\r\n    border-radius: 5px;\r\n    margin: 1rem 0;\r\n    display: flex;\r\n    align-items: center;\r\n    padding-left: 0.5rem;\r\n    font-weight: 700;\r\n    /*animation: ${ShowItemAnime} 0.4s cubic-bezier(0.455, 0.030, 0.515, 0.955) both;    */\r\n`\r\nconst StyledAdd = styled(AddCircleOutline)`\r\n    height: 80%;\r\n    margin-right: 10px;\r\n\r\n`\r\nconst StyledRemove = styled(RemoveCircleOutline)`\r\n    height: 80%;\r\n    margin-right: 10px;\r\n`\r\nconst StyledPlay = styled(Play)`\r\n    height: 80%;\r\n    margin-right: 10px;\r\n`\r\nconst StyledCameraMovie = styled(VideoCamera)`\r\n    height: 80%;\r\n    margin-right: 10px;\r\n`\r\nconst StyledLocation = styled(LocationPin)`\r\n    height: 80%;\r\n    margin-right: 10px;\r\n`\r\nconst StyledArrowBack = styled(ArrowBack)`\r\n    height: 80%;\r\n    margin-right: 10px;\r\n`\r\nconst LiveBox = styled.div`\r\n    position: absolute;\r\n    left: 40%;\r\n    top: 40%;\r\n    background-color: ${hexToRGBA(colors.bgPrimary, 0.7)};\r\n    /*width: 20vw;*/\r\n    /*height: 4rem;*/\r\n    padding: 0 10px;\r\n    border-radius: 10px;\r\n    text-align: center;\r\n`\r\nconst LiveH1 = styled.h1`\r\n    color: ${colors.primary};\r\n    font-size: xxx-large;\r\n`\r\nconst DisTimeBox = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n`\r\nconst StyledTime = styled.h2`\r\n    color: ${colors.primary};\r\n    margin-right: 1rem;\r\n`\r\nconst Counter = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n`\r\nconst NumberContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n`\r\nconst NumberBox = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    margin: 0 7px\r\n`\r\nconst NumbersElement = styled.div<NumberProps>`    \r\n    background: ${colors.counterColour};\r\n    margin: 0 2px;\r\n    font-weight: 700;\r\n    display: flex;\r\n    font-size: xxx-large;\r\n    justify-content: center;\r\n    border-radius: 5px;\r\n    padding: 0 8px;\r\n    align-items: center; \r\n    animation: ${ShowItemAnime} 0.5s ease-in-out both reverse  ;\r\n`\r\n\r\nconst AnimeNumber = styled(NumbersElement)`\r\n    animation: ${ShowItemAnime} 0.5s ease-in-out both  ;\r\n`\r\n\r\nconst NumberText = styled.div`\r\n    font-size: larger;\r\n    font-weight: 700;\r\n    margin-bottom: 2rem;\r\n`\r\nconst MessageBox = styled(LiveBox)`\r\n    top: 15%;   \r\n`\r\nconst SupportMessageBox = styled(MessageBox)`\r\n    top: 25%;\r\n`\r\nconst WeatingMessageBox = styled(LiveBox)`\r\n    top:40%   \r\n`\r\nconst Span = styled.span`\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n`\r\nconst VideoBox = styled.div`\r\n    width: 100vw;\r\n    height: 100vh;\r\n`\r\n\r\ninterface matchParamsType {\r\n    id: string\r\n}\r\n\r\ninterface VideoDosType {\r\n    viewerState: string,\r\n    videoState: string,\r\n    startTime: string,\r\n    videoID: string,\r\n    key: string,\r\n    url: string,\r\n    message: null | string,\r\n    supportMessage: string,\r\n    saved: boolean,\r\n    description: string,\r\n    id: number,\r\n    image: string,\r\n    mediumImage: string,\r\n    metadata: metadataType,\r\n    smallImage: string,\r\n    title: string,\r\n    type: string,\r\n}\r\n\r\ntype MenuItemType = \"play\" | \"list\" | \"location\" | \"producer\" | \"back\"\r\ninterface Timer {\r\n    days: number,\r\n    hours: number,\r\n    minutes: number,\r\n    seconds: number\r\n}\r\n\r\n\r\nconst Video: React.FC<RouteComponentProps<matchParamsType>> = ({ history, match }) => {\r\n    const selectToken = (state: StorageType) => state.logIn.token\r\n    const selectUserId = (state: StorageType) => state.logIn.userName\r\n    const selectVideo = (state: StorageType) => state.data.videoDetails\r\n    const dispatch = useDispatch()\r\n    const videoDisRedux = useSelector(selectVideo)\r\n    const Token = useSelector(selectToken) //token \r\n    const userId = useSelector(selectUserId) // user Id \r\n    const [loading, setLoading] = useState<boolean>(true)\r\n    const [videoDis, setVideoDis] = useState<VideoDosType>()\r\n    const [menuItem, setMenuItem] = useState<MenuItemType>(\"play\")\r\n    const [timer, setTimer] = useState<Timer>({ days: 365, hours: 59, minutes: 59, seconds: 59 })\r\n    const [liveIn, setLiveIn] = useState<boolean>(false)\r\n    const [showPlay, setShowPlay] = useState<boolean>(false)\r\n    const [min5Loop, setMin5Loop] = useState<boolean>(true)\r\n    const [min5LoopCounter, setmin5LoopCounter] = useState<number>(0)\r\n    const [sec15Loop, setSec15Loop] = useState<boolean>(false)\r\n    const [sec15LoopCounter, setSec15LoopCounter] = useState<number>(0)\r\n    const [videoPlay, setVideoPlay] = useState<boolean>(false)\r\n    const [eventWaitingMesage, setEwentWeatingMessage] = useState<string>(\"\")\r\n    const [magpieReportCall, setMagpieReportCall] = useState<boolean>(false)\r\n    let timeOut5min: any\r\n    let timeOut15sec: any\r\n\r\n    //buttons\r\n    const [play_pause, setPlay_pause] = useState<boolean>(false)\r\n    const [speedUp, setSpeedup] = useState<boolean>(true)\r\n    const [speedDown, setSpeedDown] = useState<boolean>(true)\r\n    const [plus10s, setPlus10s] = useState<boolean>(true)\r\n    const [minus10s, setMinus10s] = useState<boolean>(true)\r\n    const [up, setUp] = useState<boolean>(true)\r\n    const [down, setDown] = useState<boolean>(true)\r\n\r\n    //animations \r\n    const [animateSec, setAnimateSec] = useState<number>(0)\r\n    const [animateMin, setAnimateMin] = useState<number>(0)\r\n    const [animateHour, setAnimateHour] = useState<number>(0)\r\n    const [animateDays, setAnimateDays] = useState<number>(0)\r\n    const [animateSecS, setAnimateSecS] = useState<number>(0)\r\n    const [animateMinS, setAnimateMinS] = useState<number>(0)\r\n    const [animateHourS, setAnimateHourS] = useState<number>(0)\r\n    const [animateDaysS, setAnimateDaysS] = useState<number>(0)\r\n    const videoId = match.params.id\r\n\r\n\r\n\r\n    //keyboard  events\r\n    useEffect(() => {\r\n        addListeners()\r\n        //if (timer.hours === 0) setSatrtUpdatingLoop(true)\r\n        return () => {\r\n            removeListeners()\r\n        }\r\n    })\r\n    //timet animarion triger\r\n    useEffect(() => {\r\n        if (Math.floor(timer.days / 10) !== animateDays) setAnimateDays(Math.floor(timer.days / 10))\r\n        if (timer.days % 10 !== animateDaysS) setAnimateDaysS(timer.days % 10)\r\n\r\n        if (Math.floor(timer.hours / 10) !== animateHour) setAnimateHour(Math.floor(timer.hours / 10))\r\n        if (timer.hours % 10 !== animateHourS) setAnimateHourS(timer.hours % 10)\r\n\r\n        if (Math.floor(timer.minutes / 10) !== animateMin) setAnimateMin(Math.floor(timer.minutes / 10))\r\n        if (timer.minutes % 10 !== animateMinS) setAnimateMinS(timer.minutes % 10)\r\n\r\n        if (Math.floor(timer.seconds / 10) !== animateSec) setAnimateSec(Math.floor(timer.seconds / 10))\r\n        if (timer.seconds % 10 !== animateSecS) setAnimateSecS(timer.seconds % 10)\r\n    }, [timer, animateDays, animateDaysS, animateHour, animateHourS, animateMin, animateMinS, animateSec, animateSecS])\r\n\r\n    //update data every 5 min\r\n    useEffect(() => {\r\n        //console.log(\"Start 5min loop\", min5Loop)\r\n        clearTimeout(timeOut5min)\r\n        timeOut5min = setTimeout(function () {\r\n            if (!min5Loop) {\r\n                clearTimeout(timeOut5min)\r\n            } else {\r\n                reloadData()\r\n                setmin5LoopCounter(min5LoopCounter + 1)\r\n            }\r\n\r\n\r\n        }, 300000)\r\n        return () => clearTimeout(timeOut5min)\r\n    }, [min5Loop, min5LoopCounter])\r\n    //Update data every 15sec\r\n    useEffect(() => {\r\n        //console.log(\"Start 15s loop\", sec15Loop,)\r\n        clearTimeout(timeOut15sec)\r\n        timeOut15sec = setTimeout(function () {\r\n            if (!sec15Loop) {\r\n                clearTimeout(timeOut15sec)\r\n            } else {\r\n                reloadData()\r\n                setSec15LoopCounter(sec15LoopCounter + 1)\r\n            }\r\n\r\n        }, 15000)\r\n        return () => clearTimeout(timeOut15sec)\r\n    }, [sec15Loop, sec15LoopCounter])\r\n    //timer\r\n    useEffect(() => {\r\n        if (liveIn) {\r\n            // const countDownDate = moment(videoDisRedux?.metadata?.start_time)\r\n            const countDownDate = moment(videoDis?.startTime)\r\n            // const locationTimeOfset = (): number => {\r\n            //     const daylySavingTime = moment().isDST() ? -60 : 0 //if DST subtract 60min\r\n            //     if (videoDis?.metadata.timezone === \"Eastern\") return -300 - daylySavingTime\r\n            //     else if (videoDis?.metadata.timezone === \"Central\") return -360 - daylySavingTime\r\n            //     else if (videoDis?.metadata.timezone === \"Mountian\") return -420 - daylySavingTime\r\n            //     else return -480 - daylySavingTime\r\n            // }\r\n            //const timeOfset = new Date().getTimezoneOffset() + locationTimeOfset()\r\n            var timerLoop = setInterval(function () {\r\n                const now = moment()\r\n                // Find the distance between now and the count down date            \r\n                let distance = countDownDate.diff(now) //- (timeOfset * 60000)\r\n                // Time calculations for days, hours, minutes and seconds\r\n                const time = {\r\n                    days: Math.floor(distance / (1000 * 60 * 60 * 24)),\r\n                    hours: Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),\r\n                    minutes: Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)),\r\n                    seconds: Math.floor((distance % (1000 * 60)) / 1000),\r\n                }\r\n                // time.hours = 0\r\n                // distance = -1\r\n                // const test = {\r\n                //     days: countDownDate.startOf('day').fromNow(),\r\n                //     hours: countDownDate.startOf('hour').fromNow(),\r\n                //     minutes: countDownDate.startOf('minute').fromNow(),\r\n                //     seconds: countDownDate.startOf('second').fromNow(),\r\n                // }\r\n                // console.log(\"distance\", distance, \"countDownDate.fromNow()\",test )\r\n                if (time.hours === 0) {\r\n                    setMin5Loop(false) //stop updating very 5min\r\n                    setSec15Loop(true) //start updating every 15sec\r\n                }\r\n                if (distance < 0) {\r\n                    clearInterval(timerLoop)\r\n                    //console.log(\"Stop Timer\")\r\n                    if (liveIn) setLiveIn(false)\r\n                    setShowPlay(true)\r\n                    setEwentWeatingMessage(\"Event will start soon\")\r\n                }\r\n                setTimer(time)\r\n            }, 1000)\r\n        }\r\n\r\n        return () => clearInterval(timerLoop);\r\n    }, [liveIn, videoDisRedux?.metadata?.start_time, videoDis?.metadata.timezone, showPlay])\r\n\r\n\r\n\r\n    //main content loading\r\n    useEffect(() => {\r\n        if (!Token) history.push(LOGIN)\r\n        else if (loading) {\r\n            api.getVideoItemNoLock(Token, videoDisRedux.id)\r\n                .then(res => {\r\n                    // res.supportMessage = \"Support Message Test\"\r\n                    // res.message = \"Test MEssage\"\r\n                    console.log(videoDisRedux, res)\r\n                    setVideoDis({ ...videoDisRedux, ...res })\r\n                    if (res.viewerState === \"watch\") {\r\n                        //if starts in the future                    \r\n                        if (((new Date(videoDisRedux.metadata.start_time).getTime()) - (new Date().getTime()) > 0) && (res.videoState === \"scheduled\" || res.videoState === \"upcoming\")) {\r\n                            setLiveIn(true) //start counter\r\n                            setMenuItem(\"list\") //selevt list item in menue\r\n                        } else if (res.videoState === \"available\") setShowPlay(true) // show play button\r\n                    }\r\n                    if (res.videoState === \"delist\") {\r\n                        //console.log(\"Go Back !!! videoState:\", res.videoState)\r\n                        history.goBack()\r\n                    }\r\n                    setLoading(false)\r\n                })\r\n                .catch(error => console.log(error));\r\n        }\r\n    }, [Token, history, loading, videoDisRedux])\r\n\r\n    const handleLogOut = () => {\r\n        api.logout(Token)\r\n        dispatch(logOut())\r\n        dispatch(clearData())\r\n        localStorage.clear()\r\n        history.push(LOGIN)\r\n    }\r\n\r\n    //update data after add ar remove from myList\r\n    const reloadData = () => {\r\n        //console.log(\"Updating data...\", videoPlay)\r\n        //change api depend on playing video or not\r\n        const apiCall = videoPlay ? api.getVideoItemState(Token, videoDisRedux.id) : api.getVideoItemNoLock(Token, videoDisRedux.id)\r\n        apiCall.then(res => {\r\n            console.log(\"new data: \", videoDis, res)\r\n            if (videoDis) setVideoDis({ ...videoDisRedux, ...res })\r\n            if (res.viewerState === \"watch\") {\r\n                if (res.videoState === \"live\") { // show paly \r\n                    //if (showPlay) setShowPlay(true)\r\n                    if (liveIn) setLiveIn(false) // hide counter and show play mutton\r\n                    if (showPlay) setShowPlay(true) //show play button\r\n                    if (setMenuItem) setMenuItem(\"play\") //select play button\r\n                }\r\n            } else if (res.viewerState === \"logout\") { //invalid token\r\n                handleLogOut()\r\n            } else {\r\n                setVideoPlay(false) //close video \r\n                setShowPlay(false) //hide play button\r\n            }\r\n        })\r\n            .catch(error => console.log(error));\r\n    }\r\n\r\n    const addListeners = () => {\r\n        //document.addEventListener(\"keydown\", handleKeyUp, true);\r\n        document.addEventListener(\"keyup\", handleKeyUp, true);\r\n    }\r\n\r\n    const removeListeners = () => {\r\n        //document.removeEventListener(\"keydown\", handleKeyUp, true);\r\n        document.removeEventListener(\"keyup\", handleKeyUp, true);\r\n    }\r\n\r\n    const handleKeyUp = (e: KeyboardEvent) => {\r\n        removeListeners();\r\n        console.log(\"Listner\")\r\n        switch (e.key) {\r\n            case 'Enter':\r\n                handleEnter()\r\n                break;\r\n            case 'ArrowUp':\r\n                handleArrowUp()\r\n                break;\r\n            case 'ArrowDown':\r\n                handleArrowDown()\r\n                break;\r\n            case 'ArrowRight':\r\n                handleArrowRight()\r\n                break;\r\n            case 'ArrowLeft':\r\n                hendleArrowLeft()\r\n                break;\r\n            case 'MediaPlayPause':\r\n                hendMediaPlayPause()\r\n                break;\r\n            case 'MediaFastForward':\r\n                hendleMediaFastForward()\r\n                break;\r\n            case 'MediaRewind':\r\n                hendleMediaRewind()\r\n                break;\r\n            // case 'GoBack':\r\n            //     hendleBack()\r\n            //     break;\r\n            case 'GoBack':\r\n            case 'Backspace':\r\n                hendleBack()\r\n                break;\r\n            default:\r\n                addListeners()\r\n        }\r\n        e.preventDefault();\r\n    }\r\n    console.log(\"videoPlay\",videoPlay)\r\n    const hendleBack = () => {\r\n        console.log(\"Video backHandler\",videoPlay )\r\n        if (videoPlay) {\r\n            console.log(\"Video back\")\r\n            handleCloseVideo()\r\n            setMagpieReportCall(!magpieReportCall)            \r\n        } else {\r\n            console.log(\"History Back\")\r\n            history.goBack()\r\n        }\r\n    }\r\n    const hendleMediaFastForward = () => {\r\n        console.log(\"Hendled\")\r\n        if (videoPlay) {\r\n            setSpeedup(!speedUp)\r\n        } else addListeners()\r\n    }\r\n    const hendleMediaRewind = () => {\r\n        if (videoPlay) {\r\n            setSpeedDown(!speedDown)\r\n        } else addListeners()\r\n    }\r\n\r\n    const handleCloseVideo = () => {\r\n        console.log(\"close\")\r\n        setVideoPlay(false)\r\n    }\r\n    const hendMediaPlayPause = () => {\r\n        if (videoPlay) {\r\n            setPlay_pause(!play_pause)\r\n        } else addListeners()\r\n    }\r\n    const handleArrowRight = () => {\r\n        if (videoPlay) {\r\n            setPlus10s(!plus10s)\r\n        } else {\r\n            addListeners()\r\n        }\r\n\r\n    }\r\n\r\n    const hendleArrowLeft = () => {\r\n        if (videoPlay) {\r\n            setMinus10s(!minus10s)\r\n        } else {\r\n            addListeners()\r\n        }\r\n    }\r\n    const handleArrowUp = () => {\r\n        if (videoPlay) {\r\n            setUp(!up)\r\n        } else {\r\n            if (menuItem === \"back\") setMenuItem(\"producer\")\r\n            else if (menuItem === \"producer\") setMenuItem(\"location\")\r\n            else if (menuItem === \"location\") setMenuItem(\"list\")\r\n            else if (menuItem === \"list\" && (!liveIn || showPlay)) setMenuItem(\"play\")\r\n            else addListeners()\r\n        }\r\n\r\n    }\r\n    const handleArrowDown = () => {\r\n        if (videoPlay) {\r\n            setDown(!down)\r\n        } else {\r\n            if (menuItem === \"play\") setMenuItem(\"list\")\r\n            else if (menuItem === \"list\") setMenuItem(\"location\")\r\n            else if (menuItem === \"location\") setMenuItem(\"producer\")\r\n            else if (menuItem === \"producer\") setMenuItem(\"back\")\r\n            else addListeners()\r\n        }\r\n    }\r\n    const handleEnter = () => {\r\n        if (videoPlay) { //playing video  \r\n            setPlay_pause(!play_pause)\r\n        } else { //in details mode\r\n            if (menuItem === \"play\") {\r\n                console.log(\"play\")\r\n                clearTimeout(timeOut5min)\r\n                clearTimeout(timeOut15sec)\r\n                setMin5Loop(false) //stop updating very 5min\r\n                setSec15Loop(false) //stop updating every 15sec          \r\n                api.getVideoItem(Token, videoDisRedux.id)\r\n                    .then(res => {\r\n                        console.log(\"Play res\", res)\r\n                        api.timorLogs(userId, videoId, \"info\", `${res.url}`).catch((err) => console.log(err.message))\r\n                        if (videoDis) setVideoDis({ ...videoDisRedux, ...res })\r\n                        if (res.videoState === \"live\") { // show paly                             \r\n                            \r\n                            setLiveIn(false) // hide counter and show play mutton\r\n                            if (setMenuItem) setMenuItem(\"play\")\r\n                        } else if (res.viewerState === \"logout\") { //invalid token\r\n                            handleLogOut()\r\n                        }\r\n                        removeListeners();\r\n                        setVideoPlay(true)// start playing  \r\n                        setSec15Loop(true)  //start update every 15s\r\n\r\n                    })\r\n                    .catch(error => console.log(error));\r\n            }\r\n            else if (menuItem === \"list\") {\r\n                if (videoDis?.saved) {\r\n                    //console.log(\"remove\")\r\n                    api.removeFromMyList(Token, videoId)\r\n                        .then(() => reloadData())\r\n                        .catch(error => console.log(error));\r\n                }\r\n                else {\r\n                    api.addToMyList(Token, videoId)\r\n                        .then(() => reloadData())\r\n                        .catch(error => console.log(error));\r\n                }\r\n            }\r\n            else if (menuItem === \"location\") {\r\n                console.log(\"Location\")\r\n            }\r\n            else if (menuItem === \"producer\") {\r\n                console.log(\"producer\")\r\n            }\r\n            else if (menuItem === \"back\") {\r\n                hendleBack()\r\n            }\r\n            addListeners()\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            {loading ? <Loading /> :\r\n                <>\r\n                    {videoPlay\r\n                        ?\r\n                        <VideoBox>\r\n                            <VideoPlayer\r\n                                closeVideo={handleCloseVideo}\r\n                                // url=\"https://media.w3.org/2010/05/sintel/trailer_hd.mp4\"\r\n                                url={videoDis ? videoDis.url : \"httpsDisFacility://media.w3.org/2010/05/sintel/trailer_hd.mp4\"}\r\n                                play_pause={play_pause}\r\n                                speedUp={speedUp}\r\n                                speedDown={speedDown}\r\n                                plus10s={plus10s}\r\n                                minus10s={minus10s}\r\n                                up={up}\r\n                                down={down}\r\n                                userId={userId}\r\n                                videoId={videoDis ? videoDis.videoID : \"0\"}\r\n                                keyId={videoDis ? videoDis.key : \"0\"}\r\n                                magpieReportCall={magpieReportCall}\r\n                            />\r\n                        </VideoBox>\r\n                        :\r\n                        <MainBox bgImage={videoDisRedux.mediumImage}>\r\n                            <MenuBox>\r\n                                {showPlay ? <Buttons selected={menuItem === \"play\"} ><StyledPlay /> Play</Buttons> : \"\"}\r\n                                <Buttons selected={menuItem === \"list\"} > {videoDis?.saved ? <><StyledRemove />Remove from My List </> : <><StyledAdd /> Add to My List</>}</Buttons>\r\n                                <Buttons selected={menuItem === \"location\"}><StyledLocation /> <Span>{videoDis?.metadata.facility.name}</Span></Buttons>\r\n                                <Buttons selected={menuItem === \"producer\"}><StyledCameraMovie /> <Span>{videoDis?.metadata.producer.name}</Span></Buttons>\r\n                                <Buttons selected={menuItem === \"back\"}><StyledArrowBack /> Go Back</Buttons>\r\n                            </MenuBox>\r\n                            {eventWaitingMesage !== \"\" ?\r\n                                <SupportMessageBox>\r\n                                    <h2>{eventWaitingMesage}</h2>\r\n                                </SupportMessageBox>\r\n                                : \"\"}\r\n                            {videoDis?.supportMessage ?\r\n                                <SupportMessageBox>\r\n                                    <h2>{videoDis.supportMessage}</h2>\r\n                                </SupportMessageBox>\r\n                                : \"\"}\r\n                            {videoDis?.message ?\r\n                                <MessageBox>\r\n                                    <h2>{videoDis.message}</h2>\r\n                                </MessageBox>\r\n                                : \"\"}\r\n                            {liveIn\r\n                                ? <LiveBox>\r\n                                    {videoDis?.metadata.live && <LiveH1>Live In</LiveH1>}\r\n                                    <Counter>\r\n                                        <NumberContainer>\r\n                                            <NumberBox>\r\n                                                {Math.floor(timer.days / 100) > 0 ? animateDays !== Math.floor(timer.days / 100) ? <NumbersElement >{Math.floor(timer.days / 100)}</NumbersElement> : <AnimeNumber >{Math.floor(timer.days / 100)}</AnimeNumber> : \"\"}\r\n                                                {animateDays !== Math.floor(timer.days / 10) ? <NumbersElement >{Math.floor(timer.days / 10)}</NumbersElement> : <AnimeNumber >{Math.floor(timer.days / 10)}</AnimeNumber>}\r\n                                                {animateDaysS !== timer.days % 10 ? <NumbersElement >{timer.days % 10}</NumbersElement> : <AnimeNumber >{timer.days % 10}</AnimeNumber>}\r\n                                            </NumberBox>\r\n                                            <NumberText>Days</NumberText>\r\n                                        </NumberContainer>\r\n                                        <NumberContainer>\r\n                                            <NumberBox>\r\n                                                {animateHour !== Math.floor(timer.hours / 10) ? <NumbersElement >{Math.floor(timer.hours / 10)}</NumbersElement> : <AnimeNumber >{Math.floor(timer.hours / 10)}</AnimeNumber>}\r\n                                                {animateHourS !== timer.hours % 10 ? <NumbersElement >{timer.hours % 10}</NumbersElement> : <AnimeNumber >{timer.hours % 10}</AnimeNumber>}\r\n                                            </NumberBox>\r\n                                            <NumberText>Hours</NumberText>\r\n                                        </NumberContainer>\r\n                                        <NumberContainer>\r\n                                            <NumberBox>\r\n                                                {animateMin !== Math.floor(timer.minutes / 10) ? <NumbersElement >{Math.floor(timer.minutes / 10)}</NumbersElement> : <AnimeNumber >{Math.floor(timer.minutes / 10)}</AnimeNumber>}\r\n                                                {animateMinS !== timer.minutes % 10 ? <NumbersElement >{timer.minutes % 10}</NumbersElement> : <AnimeNumber >{timer.minutes % 10}</AnimeNumber>}\r\n                                            </NumberBox>\r\n                                            <NumberText>Minutes</NumberText>\r\n                                        </NumberContainer>\r\n                                        <NumberContainer>\r\n                                            <NumberBox>\r\n                                                {animateSec !== Math.floor(timer.seconds / 10) ? <NumbersElement >{Math.floor(timer.seconds / 10)}</NumbersElement> : <AnimeNumber >{Math.floor(timer.seconds / 10)}</AnimeNumber>}\r\n                                                {animateSecS !== timer.seconds % 10 ? <NumbersElement >{timer.seconds % 10}</NumbersElement> : <AnimeNumber >{timer.seconds % 10}</AnimeNumber>}\r\n                                            </NumberBox>\r\n                                            <NumberText>Seconds</NumberText>\r\n                                        </NumberContainer>\r\n                                    </Counter>\r\n                                </LiveBox> : \"\"}\r\n                            <DisBox>\r\n                                <TitleBox>\r\n                                    <h2>{videoDis?.title}</h2>\r\n                                    <DisTimeBox>\r\n                                        <StyledTime>{moment.parseZone(videoDis?.metadata.start_time).format(\"hh:mm a\")} {videoDis?.metadata.timezone}</StyledTime>\r\n                                        <h2>{moment(videoDis?.startTime).format(\"ll\")}</h2>\r\n                                    </DisTimeBox>\r\n                                </TitleBox>\r\n                                <Dis>\r\n                                    <h2>{videoDis?.description}</h2>\r\n                                </Dis>\r\n                            </DisBox>\r\n                        </MainBox>\r\n                    }\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default withRouter(Video)","C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Pages\\index.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\NotFound\\index.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Settings\\index.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\api.ts",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\store\\actions.ts",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Home\\Full.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Home\\index.tsx",["107","108","109","110"],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\SideMenu\\index.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Loading\\index.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Home\\Guide.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Home\\Showcase.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Home\\Normal.tsx",[],"C:\\Users\\asmyc\\Desktop\\Dev\\riivet\\firetv-2.0\\src\\componets\\Video\\VideoPlayer.tsx",["111","112","113","114","115","116"],"import React, { useRef, useState, useEffect } from \"react\"\r\nimport styled, { keyframes } from 'styled-components';\r\nimport { Forward10 } from \"@styled-icons/material/Forward10\"\r\nimport { Replay10 } from \"@styled-icons/material/Replay10\"\r\nimport { Forward2 } from \"@styled-icons/icomoon/Forward2\"\r\nimport { Backward } from \"@styled-icons/icomoon/Backward\"\r\nimport { PlayCircle } from \"@styled-icons/fa-regular/PlayCircle\"\r\nimport { PauseCircle } from \"@styled-icons/fa-regular/PauseCircle\"\r\nimport { colors, hexToRGBA, host } from \"../../constants\"\r\nimport { CarSport } from \"@styled-icons/ionicons-sharp/CarSport\"\r\nimport { Speedometer2 } from \"@styled-icons/bootstrap/Speedometer2\"\r\nimport { Loading } from \"../Loading\"\r\nimport api from \"../../api\";\r\n\r\n\r\n\r\n\r\ninterface ButtonProps {\r\n    clicked?: boolean\r\n}\r\ninterface ProgressProps {\r\n    width: number\r\n}\r\n\r\ninterface MenueProps {\r\n    show: boolean\r\n}\r\nconst ButtonClickAnimation = keyframes`\r\n    0% {\r\n        transform: scale(1);\r\n        filter: blur(0px);\r\n        opacity: 1;\r\n        color: ${colors.textPrimary}\r\n    }\r\n    100% {\r\n        transform: scale(0.8);\r\n        filter: blur(4px);\r\n       /* opacity: 0;*/\r\n        color:${colors.primary}\r\n    }\r\n`\r\nconst ButtonClickAnimation2 = keyframes`\r\n    0% {\r\n        transform: scale(1);\r\n        filter: blur(0px);\r\n        opacity: 1;\r\n        color: ${colors.textPrimary}\r\n    }\r\n    100% {\r\n        transform: scale(0.8);\r\n        filter: blur(5px);\r\n       /* opacity: 0;*/\r\n        color:${colors.primary}\r\n    }\r\n`\r\nconst StyledLoading = styled(Loading)`\r\n    // \r\n    \r\n`\r\n\r\n\r\nconst Forward10Button = styled(Forward10) <ButtonProps>`\r\n    width: 3rem;\r\n    margin: 0 0.5rem;\r\n    animation: ${props => props.clicked ? ButtonClickAnimation : ButtonClickAnimation2} 0.1s cubic-bezier(0.165, 0.840, 0.440, 1.000) both reverse;\r\n`\r\nconst Replay10Button = styled(Replay10) <ButtonProps>`\r\n    width: 3rem;\r\n    margin: 0 0.5rem;\r\n    animation: ${props => props.clicked ? ButtonClickAnimation : ButtonClickAnimation2} 0.1s cubic-bezier(0.165, 0.840, 0.440, 1.000) both reverse;\r\n`\r\n\r\nconst Forward2Button = styled(Forward2) <ButtonProps>`\r\n    width: 3rem;\r\n    margin: 0 0.5rem;\r\n    animation: ${props => props.clicked ? ButtonClickAnimation : ButtonClickAnimation2} 0.1s cubic-bezier(0.165, 0.840, 0.440, 1.000) both reverse;\r\n`\r\nconst BackwardButton = styled(Backward) <ButtonProps>`\r\n    width: 3rem;\r\n    margin: 0 0.5rem;\r\n    animation: ${props => props.clicked ? ButtonClickAnimation : ButtonClickAnimation2} 0.1s cubic-bezier(0.165, 0.840, 0.440, 1.000) both reverse;\r\n`\r\n\r\nconst PlayCircleButton = styled(PlayCircle) <ButtonProps>`\r\n    width: 5rem;\r\n    margin: 0 0.5rem;\r\n    animation: ${props => props.clicked ? ButtonClickAnimation : ButtonClickAnimation2} 0.1s cubic-bezier(0.165, 0.840, 0.440, 1.000) both reverse;\r\n`\r\nconst PauseCircleButton = styled(PauseCircle) <ButtonProps>`\r\n    width: 5rem;\r\n    margin: 0 0.5rem;\r\n    animation: ${props => props.clicked ? ButtonClickAnimation : ButtonClickAnimation2} 0.1s cubic-bezier(0.165, 0.840, 0.440, 1.000) both reverse;\r\n`\r\nconst MenueContainer = styled.div<MenueProps>`\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    width: 100vw;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    height: 15vh;\r\n    background-color:  ${hexToRGBA(colors.bgPrimary, 0.7)};\r\n    transform: translateY( ${props => !props.show ? 200 : 0}px);\r\n\r\n`\r\nconst ProgressContainer = styled.div`\r\n    width: 90%;\r\n`\r\n\r\nconst StyledCarSport = styled(CarSport) <ProgressProps>`\r\n    width: 3rem;\r\n    transform: translate(-5px, -35px); \r\n    margin-left: ${props => props.width}%;\r\n    color: ${colors.primary}\r\n`\r\n\r\nconst ButtonContainer = styled.div`\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-around;\r\n    height: 100%;\r\n    align-items: center;\r\n    position: relative;\r\n`\r\nconst StyledVideo = styled.video`\r\n    width: 100vw;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center  ;   \r\n`\r\nconst TimeContainer = styled.div`\r\n    width: 6rem;\r\n    display: flex;\r\n    flex-direction: row;\r\n`\r\nconst CurrentTimeBox = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-around;\r\n`\r\nconst SpeedBox = styled.div`\r\n    position: absolute;\r\n    left: 20%;\r\n    top: 40%;\r\n`\r\nconst ProgressBox = styled.div`   \r\n    height: 100%\r\n    width:100%;\r\n    background-color: ${colors.textPrimary};\r\n    border-radius: 10px;\r\n    margin-top:1rem;\r\n    height:1rem;\r\n    position: relative;\r\n\r\n`\r\nconst ProgressElement = styled.div<ProgressProps>`\r\n    height:100%;\r\n    width: ${props => props.width}%;\r\n    background-color: ${colors.primary};\r\n    border-radius: 10px 0px 0px 10px;\r\n    text-align: right;\r\n    \r\n`\r\nconst StyledSpeedometer2 = styled(Speedometer2)`\r\n    width: 2rem;\r\n    color: ${colors.primary};\r\n    margin-left: 0.5rem;\r\n    transform: translateY(-5px);\r\n`\r\n\r\n\r\n\r\ntype VideoProps = {\r\n    url: string,\r\n    closeVideo: () => void,\r\n    play_pause: boolean,\r\n    speedUp: boolean,\r\n    speedDown: boolean,\r\n    plus10s: boolean,\r\n    minus10s: boolean,\r\n    up: boolean,\r\n    down: boolean,\r\n    userId: string,\r\n    videoId: string,\r\n    keyId: string,\r\n    magpieReportCall: boolean\r\n}\r\n\r\ntype TimeType = {\r\n    hours: number\r\n    minutes: number\r\n    seconds: number\r\n}\r\ntype PrevSessionType = {\r\n    user: string,\r\n    stream: string,\r\n    position: number,\r\n    watched: number,\r\n    volume: number,\r\n    version: string\r\n}\r\n\r\nconst VideoPlayer: React.FC<VideoProps> = ({ url, closeVideo, play_pause, speedUp, speedDown, plus10s, minus10s, up, down, userId, videoId, keyId, magpieReportCall }) => {\r\n    const video = useRef<HTMLVideoElement>(null)\r\n    //const progress = useRef<HTMLProgressElement>(null)\r\n    const [playing, setPlaying] = useState<boolean>(true)\r\n    const [backSpeed, setBackSpeed] = useState<boolean>(true)\r\n    const [forwardSpeed, setForwardSpeed] = useState<boolean>(true)\r\n    const [plus10Sec, setPlus10Sec] = useState<boolean>(true)\r\n    const [minus10Sec, setMinus10Sec] = useState<boolean>(true)\r\n    const [currentTime, setCurrentTime] = useState<TimeType>({ hours: 0, minutes: 0, seconds: 0 })\r\n    const [videoDuration, setVideoDuration] = useState<TimeType>({ hours: 0, minutes: 0, seconds: 0 })\r\n    const [speed, setSpeed] = useState<1 | 2 | 3 | 4>(1)\r\n    const [progress, setProgress] = useState<number>(0)\r\n    const [loading, setLoading] = useState<boolean>(true)\r\n    const [videoReady, setVideoReady] = useState<boolean>(false)\r\n    const [hideMenue, setHideMenue] = useState<boolean>(true)\r\n    const [magpieResset, setMagpieResset] = useState<boolean>(false)\r\n    const [magpieCounter, setMagpieCounter] = useState<any>(Date.now())\r\n    let magpieLoop: any\r\n    //let magpieCounter = \r\n    // let prevSession = {\r\n    //     user: userId,\r\n    //     stream: videoId,\r\n    //     position: video.current ? video.current?.currentTime:0,\r\n    //     watched: new Date().getSeconds(),\r\n    //     volume: video.current ? video.current.volume * 100 : 0,\r\n    //     version: \"FireTV 2.0.0\"\r\n    // }\r\n\r\n\r\n    const usePrevious = (value: VideoProps) => {\r\n        const ref = useRef<VideoProps>();\r\n        useEffect(() => {\r\n            ref.current = value;\r\n        });\r\n        return ref.current;\r\n    }\r\n\r\n    const previousProps = usePrevious({ url, play_pause, speedUp, speedDown, plus10s, minus10s, closeVideo, up, down, userId, videoId, keyId, magpieReportCall })\r\n\r\n    //Magpie Loop\r\n    useEffect(() => {\r\n        magpieApiReport()\r\n        magpieLoop = setTimeout(() => { setMagpieResset(!magpieResset) }, 60000);\r\n        return () => clearTimeout(magpieLoop)\r\n    }, [magpieResset, magpieReportCall])\r\n\r\n\r\n    //check which button ckicked\r\n    useEffect(() => {\r\n        if (!loading) {\r\n            if (previousProps?.play_pause !== play_pause) playPauseHandle()\r\n            if (previousProps?.speedUp !== speedUp) fastForward()\r\n            if (previousProps?.speedDown !== speedDown) fastBack()\r\n            if (previousProps?.plus10s !== plus10s) moveUp10Sec()\r\n            if (previousProps?.minus10s !== minus10s) moveDown10Sec()\r\n            if (previousProps?.up !== up) setHideMenue(true)\r\n            if (previousProps?.down !== down) setHideMenue(false)\r\n        } else {\r\n            setLoading(false)\r\n        }\r\n    }, [play_pause, speedUp, speedDown, plus10s, minus10s, loading])\r\n\r\n    //Timor session loop\r\n    useEffect(() => {\r\n        var timorSessionLoop = setInterval(() => {\r\n            // const nowSeconds = new Date().getSeconds()\r\n            // const time = nowSeconds < prevSession.watched ? (nowSeconds+60)-prevSession.watched : nowSeconds-prevSession.watched\r\n            const data = {\r\n                user: userId,\r\n                stream: videoId,\r\n                position: video.current ? Math.round(video.current.currentTime) : 0,\r\n                watched: 15,\r\n                volume: video.current ? video.current.volume * 100 : 0,\r\n                version: \"FireTV 2.0.0\"\r\n            }\r\n            //console.log(\"data to session\", data,)\r\n            api.timorSession(userId, videoId, video.current ? Math.round(video.current.currentTime) : 0, 15, video.current ? video.current.volume * 100 : 0, \"FireTV 2.0.0\")\r\n                .catch((err) => console.log(err.message))\r\n            // prevSession = data\r\n        }, 15000)\r\n        return () => clearInterval(timorSessionLoop)\r\n    }, [])\r\n\r\n\r\n    //Events \r\n    useEffect(() => {\r\n        video.current?.addEventListener(\"canplay\", canPlayHandler) //1\r\n        video.current?.addEventListener(\"ended\", videoEndedHandler)//9\r\n        video.current?.addEventListener(\"error\", (e) => errorHandler(e))\r\n        video.current?.addEventListener(\"pause\", pauseEventHandler); //5/8\r\n        video.current?.addEventListener(\"play\", playEventHandler);//2/6\r\n        video.current?.addEventListener(\"timeupdate\", timeUpdateHandler)//4 ........\r\n        video.current?.addEventListener(\"waiting\", waitingEventHandler)\r\n        video.current?.addEventListener(\"stalled\", stalledHandler)\r\n        // video.current?.addEventListener(\"playing\", playingHandler)//3/7\r\n        return () => {\r\n            video.current?.removeEventListener(\"canplay\", canPlayHandler)\r\n            video.current?.removeEventListener(\"ended\", videoEndedHandler)\r\n            video.current?.removeEventListener(\"error\", errorHandler)\r\n            video.current?.removeEventListener(\"pause\", pauseEventHandler);\r\n            video.current?.removeEventListener(\"play\", playEventHandler);\r\n            video.current?.removeEventListener(\"timeupdate\", timeUpdateHandler)\r\n            video.current?.removeEventListener(\"waiting\", waitingEventHandler)\r\n            video.current?.removeEventListener(\"stalled\", stalledHandler)\r\n            // video.current?.removeEventListener(\"playing\", playingHandler)\r\n        }\r\n    })\r\n\r\n    //progress loop\r\n    useEffect(() => {\r\n        let intervalLoop = setInterval(() => {\r\n            let prog\r\n            if (video.current) {\r\n                //setVideoDuration(video.current?.duration)\r\n                prog = Math.round((video.current?.currentTime / video.current?.duration) * 100)\r\n                setProgress(prog)\r\n                const time: TimeType = {\r\n                    hours: Math.floor(Math.floor(video.current?.currentTime / 60) / 60),\r\n                    minutes: Math.floor(video.current?.currentTime / 60) - Math.floor(Math.floor(video.current?.currentTime / 60) / 60) * 60,\r\n                    seconds: Math.round(video.current?.currentTime - (Math.floor(video.current?.currentTime / 60) * 60))\r\n                }\r\n                // setCurrentTime(Math.round(video.current?.currentTime))\r\n                setCurrentTime(time)\r\n                if (prog === 100) setPlaying(false)\r\n            }\r\n        }, 100)\r\n        return () => clearInterval(intervalLoop)\r\n    })\r\n    //Speed loop\r\n    useEffect(() => {\r\n        let speedLoop = setInterval(() => {\r\n            console.log(\"Speed \", speed)\r\n            if (speed === 1) clearInterval(speedLoop)\r\n            if (speed === 2) if (video.current) video.current.currentTime += 10.0\r\n            if (speed === 3) if (video.current) video.current.currentTime += 60.0\r\n            if (speed === 4) if (video.current) video.current.currentTime += 120.0\r\n        }, 1000)\r\n        return () => clearInterval(speedLoop)\r\n    }, [speed])\r\n\r\n    //Event handlers\r\n    const canPlayHandler = () => {\r\n        console.log(\"canPlayHandler\")\r\n        if (video.current) {\r\n            const time: TimeType = {\r\n                hours: Math.floor(Math.floor(video.current?.duration / 60) / 60),\r\n                minutes: Math.floor(video.current?.duration / 60) - Math.floor(Math.floor(video.current?.duration / 60) / 60) * 60,\r\n                seconds: Math.round(video.current?.duration - (Math.floor(video.current?.duration / 60) * 60))\r\n            }\r\n            setVideoDuration(time)\r\n            setVideoReady(true)\r\n        }\r\n    }\r\n\r\n    const magpieApiReport = () => {\r\n        const report = {\r\n            key: keyId,\r\n            email: userId,\r\n            host: host,\r\n            video_id: videoId,\r\n            captured: new Date().toISOString(),\r\n            seconds: Math.floor((Date.now() - magpieCounter) / 1000)\r\n        }\r\n        setMagpieCounter(Date.now())\r\n        api.magpieReport(report).catch((err) => console.log(err.message))\r\n        console.log(\"magpieLoop\", report)\r\n    }\r\n\r\n    const videoEndedHandler = () => {\r\n        console.log(\"videoEndedHandler\")\r\n        magpieApiReport()\r\n        closeVideo()\r\n    }\r\n    const errorHandler = (err: ErrorEvent) => {\r\n        console.log(\"errorHandler\")\r\n        api.timorLogs(userId, videoId, \"error\", err.message).catch((err) => console.log(err.message))\r\n    }\r\n    const pauseEventHandler = () => {\r\n        console.log(\"pauseEventHandler\",)\r\n        api.timorLogs(userId, videoId, \"control\", \"Video paused\").catch((err) => console.log(err.message))\r\n    }\r\n    const playEventHandler = () => {\r\n        console.log(\"playEventHandler\")\r\n        api.timorLogs(userId, videoId, \"control\", \"Video start playing\").catch((err) => console.log(err.message))\r\n    }\r\n    const timeUpdateHandler = () => {\r\n        //loop 15s //session api\r\n        console.log(\"timeUpdateHandler\")\r\n    }\r\n    const waitingEventHandler = () => {\r\n        //buffering +\"\"\r\n        console.log(\"waitingEventHandler\")\r\n        api.timorLogs(userId, videoId, \"buffering\", \"\").catch((err) => console.log(err.message))\r\n    }\r\n    const stalledHandler = () => {\r\n        console.log(\"stalledHandler\")\r\n        api.timorLogs(userId, videoId, \"info\", \"Video stall\").catch((err) => console.log(err.message))\r\n    }\r\n    // const playingHandler = () => {\r\n    //     //clear it\r\n    //     console.log(\"playingHandler\")\r\n    // }\r\n\r\n    //Speed icons\r\n    const Speed = () => {\r\n        let SpeedX = []\r\n        for (let i = 0; i < speed; i++) {\r\n            SpeedX.push(<StyledSpeedometer2 key={i} />)\r\n        }\r\n        return SpeedX\r\n    }\r\n\r\n    const playPauseHandle = () => {\r\n        clearTimeout(magpieLoop)\r\n        if (playing) { //pause\r\n            video.current?.pause()\r\n            setPlaying(false)\r\n            setSpeed(1)\r\n            magpieApiReport()\r\n            //setSpeed(1)\r\n        }\r\n        else { //play\r\n            video.current?.play()\r\n            setPlaying(true)\r\n            setSpeed(1)\r\n            setMagpieCounter(Date.now())\r\n            setMagpieResset(!magpieResset)\r\n        }\r\n    }\r\n    const fastForward = () => {\r\n        console.log(\"Speed up\")\r\n        clearTimeout(magpieLoop)\r\n        magpieApiReport()\r\n        if (video.current) {\r\n            if (speed === 1) setSpeed(2)\r\n            if (speed === 2) setSpeed(3)\r\n            if (speed === 3) setSpeed(4)\r\n            setForwardSpeed(!forwardSpeed)\r\n        }\r\n\r\n    }\r\n    const fastBack = () => {\r\n        clearTimeout(magpieLoop)\r\n        magpieApiReport()       \r\n        if (video.current) {\r\n            if (video.current) {\r\n                if (speed === 2) setSpeed(1)\r\n                if (speed === 3) setSpeed(2)\r\n                if (speed === 4) setSpeed(3)\r\n                setBackSpeed(!backSpeed)\r\n            }\r\n        }\r\n    }\r\n    const moveUp10Sec = () => {\r\n        if (video.current) video.current.currentTime += 10.0\r\n        setPlus10Sec(!plus10Sec)\r\n    }\r\n    const moveDown10Sec = () => {\r\n        if (video.current) video.current.currentTime -= 10.0\r\n        setMinus10Sec(!minus10Sec)\r\n    }\r\n\r\n    //return progress\r\n\r\n    //progressLoop()\r\n\r\n    return (\r\n        <div>\r\n            {!videoReady ? <StyledLoading /> : \"\"}\r\n            <StyledVideo ref={video} autoPlay id=\"video\">\r\n                <source src={url} type=\"application/x-mpegURL\" />\r\n                {/* <source src={url} type=\"video/mp4\" /> */}\r\n            </StyledVideo>\r\n            <MenueContainer show={hideMenue}>\r\n                <ProgressContainer>\r\n                    <ProgressBox>\r\n                        {/* <StyledFlagCheckered />\r\n                        <StyledToriiGate/> */}\r\n                        <ProgressElement width={progress}> </ProgressElement><StyledCarSport width={progress} />\r\n                    </ProgressBox>\r\n                    {/* <Progress ref={progress} max=\"100\" value=\"0\" /> */}\r\n                </ProgressContainer>\r\n                <ButtonContainer>\r\n                    <SpeedBox>\r\n                        Speed:{Speed()}\r\n                    </SpeedBox>\r\n                    <CurrentTimeBox>\r\n                        <TimeContainer>\r\n                            {/* {Math.floor(currentTime / 60) > 0 ? `${Math.floor(currentTime / 60)}:` : \"\"}\r\n                                {currentTime - (Math.floor(currentTime / 60) * 60)} */}\r\n                            {currentTime?.hours > 0 ? `${currentTime?.hours}:` : \"\"}\r\n                            {currentTime?.minutes > 0 ? `${currentTime?.minutes}:` : \"\"}\r\n                            {currentTime?.seconds}s\r\n                            </TimeContainer>\r\n                    </CurrentTimeBox>\r\n                    <div>\r\n                        {backSpeed ? <BackwardButton clicked={true} onClick={fastBack} /> : <BackwardButton clicked={false} onClick={fastBack} />}\r\n                        {minus10Sec ? <Replay10Button clicked={true} onClick={moveDown10Sec} /> : <Replay10Button clicked={false} onClick={moveDown10Sec} />}\r\n                        {playing ? <PauseCircleButton clicked={play_pause} onClick={playPauseHandle} /> : <PlayCircleButton clicked={play_pause} onClick={playPauseHandle} />}\r\n                        {plus10Sec ? <Forward10Button clicked={true} onClick={moveUp10Sec} /> : <Forward10Button clicked={false} onClick={moveUp10Sec} />}\r\n                        {forwardSpeed ? <Forward2Button clicked={true} onClick={fastForward} /> : <Forward2Button clicked={false} onClick={fastForward} />}\r\n                    </div>\r\n                    <TimeContainer>\r\n                        {/* {Math.floor(Math.floor(videoDuration / 60) / 60) > 0 ? `${Math.floor(Math.floor(videoDuration / 60) / 60)}:` : \"\"}\r\n                            {Math.floor(videoDuration / 60) > 0 ? `${Math.floor(videoDuration / 60) - Math.floor(Math.floor(videoDuration / 60) / 60) * 60}:` : \"\"}\r\n                            {(videoDuration - (Math.floor(videoDuration / 60) * 60)).toFixed(0)} */}\r\n                        {videoDuration?.hours > 0 ? `${videoDuration?.hours}:` : \"\"}\r\n                        {videoDuration?.minutes > 0 ? `${videoDuration?.minutes}:` : \"\"}\r\n                        {videoDuration?.seconds}s\r\n\r\n                        </TimeContainer>\r\n                </ButtonContainer>\r\n            </MenueContainer>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default VideoPlayer",{"ruleId":"117","replacedBy":"118"},{"ruleId":"119","replacedBy":"120"},{"ruleId":"121","severity":1,"message":"122","line":185,"column":7,"nodeType":"123","messageId":"124","endLine":185,"endColumn":24},{"ruleId":"125","severity":1,"message":"126","line":304,"column":23,"nodeType":"127","endLine":313,"endColumn":19},{"ruleId":"125","severity":1,"message":"128","line":320,"column":24,"nodeType":"127","endLine":328,"endColumn":18},{"ruleId":"125","severity":1,"message":"129","line":380,"column":8,"nodeType":"130","endLine":380,"endColumn":92,"suggestions":"131"},{"ruleId":"121","severity":1,"message":"132","line":170,"column":7,"nodeType":"123","messageId":"124","endLine":170,"endColumn":12},{"ruleId":"121","severity":1,"message":"133","line":278,"column":10,"nodeType":"123","messageId":"124","endLine":278,"endColumn":19},{"ruleId":"121","severity":1,"message":"134","line":278,"column":21,"nodeType":"123","messageId":"124","endLine":278,"endColumn":33},{"ruleId":"135","severity":1,"message":"136","line":601,"column":56,"nodeType":"137","messageId":"138","endLine":601,"endColumn":58},{"ruleId":"121","severity":1,"message":"139","line":197,"column":6,"nodeType":"123","messageId":"124","endLine":197,"endColumn":21},{"ruleId":"125","severity":1,"message":"140","line":248,"column":22,"nodeType":"127","endLine":248,"endColumn":81},{"ruleId":"125","severity":1,"message":"141","line":266,"column":8,"nodeType":"130","endLine":266,"endColumn":68,"suggestions":"142"},{"ruleId":"121","severity":1,"message":"143","line":273,"column":19,"nodeType":"123","messageId":"124","endLine":273,"endColumn":23},{"ruleId":"125","severity":1,"message":"144","line":287,"column":8,"nodeType":"130","endLine":287,"endColumn":10,"suggestions":"145"},{"ruleId":"125","severity":1,"message":"146","line":309,"column":19,"nodeType":"123","endLine":309,"endColumn":26},"no-native-reassign",["147"],"no-negated-in-lhs",["148"],"@typescript-eslint/no-unused-vars","'WeatingMessageBox' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","Assignments to the 'timeOut5min' variable from inside React Hook useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useEffect.","CallExpression","Assignments to the 'timeOut15sec' variable from inside React Hook useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useEffect.","React Hook useEffect has a missing dependency: 'videoDis?.startTime'. Either include it or remove the dependency array.","ArrayExpression",["149"],"'Image' is assigned a value but never used.","'moreIndex' is assigned a value but never used.","'setMoreIndex' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'PrevSessionType' is defined but never used.","Assignments to the 'magpieLoop' variable from inside React Hook useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useEffect.","React Hook useEffect has missing dependencies: 'down', 'fastBack', 'fastForward', 'moveDown10Sec', 'moveUp10Sec', 'playPauseHandle', 'previousProps?.down', 'previousProps?.minus10s', 'previousProps?.play_pause', 'previousProps?.plus10s', 'previousProps?.speedDown', 'previousProps?.speedUp', 'previousProps?.up', and 'up'. Either include them or remove the dependency array.",["150"],"'data' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'userId' and 'videoId'. Either include them or remove the dependency array.",["151"],"The ref value 'video.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'video.current' to a variable inside the effect, and use that variable in the cleanup function.","no-global-assign","no-unsafe-negation",{"desc":"152","fix":"153"},{"desc":"154","fix":"155"},{"desc":"156","fix":"157"},"Update the dependencies array to be: [liveIn, videoDisRedux.metadata.start_time, videoDis.metadata.timezone, showPlay, videoDis?.startTime]",{"range":"158","text":"159"},"Update the dependencies array to be: [play_pause, speedUp, speedDown, plus10s, minus10s, loading, previousProps?.play_pause, previousProps?.speedUp, previousProps?.speedDown, previousProps?.plus10s, previousProps?.minus10s, previousProps?.up, previousProps?.down, playPauseHandle, fastForward, fastBack, moveUp10Sec, moveDown10Sec, up, down]",{"range":"160","text":"161"},"Update the dependencies array to be: [userId, videoId]",{"range":"162","text":"163"},[13097,13181],"[liveIn, videoDisRedux.metadata.start_time, videoDis.metadata.timezone, showPlay, videoDis?.startTime]",[8422,8482],"[play_pause, speedUp, speedDown, plus10s, minus10s, loading, previousProps?.play_pause, previousProps?.speedUp, previousProps?.speedDown, previousProps?.plus10s, previousProps?.minus10s, previousProps?.up, previousProps?.down, playPauseHandle, fastForward, fastBack, moveUp10Sec, moveDown10Sec, up, down]",[9519,9521],"[userId, videoId]"]